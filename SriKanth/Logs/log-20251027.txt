2025-10-27 12:49:05.477 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 12:49:06.019 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 12:49:06.022 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 12:49:06.991 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 12:49:07.015 +05:30 [INF] Hosting environment: Test
2025-10-27 12:49:07.020 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 12:49:08.960 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 12:49:09.664 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 724.3695ms
2025-10-27 12:49:09.689 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 12:49:09.759 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 70.6336ms
2025-10-27 12:49:09.782 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 12:49:10.042 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 260.0358ms
2025-10-27 12:49:12.374 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 12:49:12.437 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.6644ms
2025-10-27 12:49:43.462 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 12:49:43.725 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:49:44.065 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 12:49:44.255 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 12:49:47.581 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 12:49:47.585 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 12:49:47.588 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 12:49:47.592 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 12:49:49.055 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:49:49.078 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:49:50.439 +05:30 [INF] Executed DbCommand (122ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 12:49:50.585 +05:30 [INF] Received HTTP response headers after 1499.5077ms - 200
2025-10-27 12:49:50.592 +05:30 [INF] End processing HTTP request after 1541.4728ms - 200
2025-10-27 12:49:50.630 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:49:50.633 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:49:51.924 +05:30 [INF] Received HTTP response headers after 1287.8902ms - 200
2025-10-27 12:49:51.927 +05:30 [INF] End processing HTTP request after 1297.0963ms - 200
2025-10-27 12:49:53.423 +05:30 [INF] Executed DbCommand (30ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 12:49:57.865 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 12:50:00.633 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:50:00.659 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:51:15.870 +05:30 [INF] Received HTTP response headers after 75208.6076ms - 200
2025-10-27 12:51:15.873 +05:30 [INF] End processing HTTP request after 75240.2849ms - 200
2025-10-27 12:51:34.549 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 12:51:34.595 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 110515.5448ms
2025-10-27 12:51:34.599 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:51:34.621 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 111158.8521ms
2025-10-27 12:51:34.750 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 12:52:29.377 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 12:52:29.394 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:52:29.399 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 12:52:29.407 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 12:52:29.439 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:52:29.443 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:52:29.448 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 12:52:31.871 +05:30 [INF] Received HTTP response headers after 2425.3172ms - 200
2025-10-27 12:52:31.876 +05:30 [INF] End processing HTTP request after 2437.2606ms - 200
2025-10-27 12:52:31.882 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:52:31.890 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:52:33.312 +05:30 [INF] Received HTTP response headers after 1418.0976ms - 200
2025-10-27 12:52:33.315 +05:30 [INF] End processing HTTP request after 1432.628ms - 200
2025-10-27 12:52:34.409 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 12:52:40.089 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 12:53:02.634 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:53:02.649 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:54:16.392 +05:30 [INF] Received HTTP response headers after 73741.471ms - 200
2025-10-27 12:54:16.395 +05:30 [INF] End processing HTTP request after 73761.2459ms - 200
2025-10-27 12:54:36.797 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 12:54:36.820 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 127416.6656ms
2025-10-27 12:54:36.823 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:54:36.827 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 127449.9704ms
2025-10-27 12:54:36.927 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 12:54:55.046 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 12:54:55.060 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:54:55.068 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 12:54:55.078 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 12:54:55.181 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:54:55.184 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 12:54:55.184 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:55:03.681 +05:30 [INF] Received HTTP response headers after 8488.8674ms - 200
2025-10-27 12:55:03.686 +05:30 [INF] End processing HTTP request after 8505.2188ms - 200
2025-10-27 12:55:03.690 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:55:03.693 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:55:04.979 +05:30 [INF] Received HTTP response headers after 1282.6109ms - 200
2025-10-27 12:55:04.983 +05:30 [INF] End processing HTTP request after 1293.3923ms - 200
2025-10-27 12:55:06.226 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 12:55:06.238 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 12:55:12.496 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:55:12.499 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:56:26.519 +05:30 [INF] Received HTTP response headers after 74016.9371ms - 200
2025-10-27 12:56:26.599 +05:30 [INF] End processing HTTP request after 74103.5503ms - 200
2025-10-27 12:56:50.806 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 12:56:50.831 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 115759.1721ms
2025-10-27 12:56:50.835 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:56:50.841 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 115795.2786ms
2025-10-27 12:56:50.994 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 12:56:57.781 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 12:56:57.794 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:56:57.799 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 12:56:57.807 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 12:56:57.816 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:56:57.821 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 12:56:57.822 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 12:56:58.276 +05:30 [INF] Received HTTP response headers after 450.4847ms - 200
2025-10-27 12:56:58.281 +05:30 [INF] End processing HTTP request after 464.6504ms - 200
2025-10-27 12:56:58.290 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:56:58.294 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 12:56:59.712 +05:30 [INF] Received HTTP response headers after 1413.554ms - 200
2025-10-27 12:56:59.716 +05:30 [INF] End processing HTTP request after 1426.0028ms - 200
2025-10-27 12:57:01.540 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 12:57:01.547 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 12:57:01.549 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:57:01.553 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 12:58:21.041 +05:30 [INF] Received HTTP response headers after 79485.6571ms - 200
2025-10-27 12:58:21.055 +05:30 [INF] End processing HTTP request after 79505.4198ms - 200
2025-10-27 12:58:41.876 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 12:58:41.883 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 104078.5719ms
2025-10-27 12:58:41.885 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 12:58:41.894 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 104113.5959ms
2025-10-27 12:58:42.251 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:05:38.561 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:05:39.028 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:05:39.032 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:05:39.282 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:05:39.287 +05:30 [INF] Hosting environment: Test
2025-10-27 13:05:39.289 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:05:40.230 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:05:40.674 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 451.1619ms
2025-10-27 13:05:40.918 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:05:40.919 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:05:40.955 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 36.6183ms
2025-10-27 13:05:41.015 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 96.7831ms
2025-10-27 13:05:43.077 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:05:43.257 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 179.472ms
2025-10-27 13:06:06.967 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:06:07.206 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:06:07.468 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:06:07.613 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 13:06:10.830 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:06:10.835 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:06:10.839 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:06:10.842 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:06:12.020 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:06:12.028 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:06:12.052 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:06:12.062 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:06:12.071 +05:30 [INF] Waiting for parallel API calls...
2025-10-27 13:06:12.355 +05:30 [INF] Executed DbCommand (120ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 13:06:12.629 +05:30 [INF] Received HTTP response headers after 562.5455ms - 200
2025-10-27 13:06:12.634 +05:30 [INF] End processing HTTP request after 581.3312ms - 200
2025-10-27 13:06:12.639 +05:30 [INF] Received HTTP response headers after 608.4235ms - 200
2025-10-27 13:06:12.642 +05:30 [INF] End processing HTTP request after 633.5057ms - 200
2025-10-27 13:06:12.668 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:06:12.668 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:06:12.671 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:06:12.675 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:06:14.453 +05:30 [INF] Received HTTP response headers after 1766.2799ms - 200
2025-10-27 13:06:14.459 +05:30 [INF] End processing HTTP request after 1791.1142ms - 200
2025-10-27 13:07:34.995 +05:30 [INF] Received HTTP response headers after 82315.872ms - 200
2025-10-27 13:07:34.997 +05:30 [INF] End processing HTTP request after 82329.343ms - 200
2025-10-27 13:07:52.841 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 13:07:52.855 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 105374.0426ms
2025-10-27 13:07:52.859 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:07:52.878 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 105911.367ms
2025-10-27 13:07:53.027 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:08:21.652 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:08:22.311 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:08:22.316 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:08:23.252 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:08:23.427 +05:30 [INF] Hosting environment: Test
2025-10-27 13:08:23.451 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:08:23.705 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:08:24.398 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 730.271ms
2025-10-27 13:08:24.826 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:08:24.826 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:08:24.896 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 70.8237ms
2025-10-27 13:08:25.003 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 177.8337ms
2025-10-27 13:08:28.448 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:08:28.532 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.8064ms
2025-10-27 13:08:53.097 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:08:53.375 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:08:53.757 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:08:53.954 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 13:09:05.100 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:09:05.105 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:09:05.108 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:09:05.114 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:09:06.444 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:09:06.462 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:09:06.486 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:09:06.490 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:09:06.510 +05:30 [INF] Waiting for parallel API calls...
2025-10-27 13:09:06.794 +05:30 [INF] Executed DbCommand (89ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 13:09:06.884 +05:30 [INF] Received HTTP response headers after 413.5809ms - 200
2025-10-27 13:09:06.888 +05:30 [INF] End processing HTTP request after 446.0902ms - 200
2025-10-27 13:09:06.923 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:09:06.928 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:09:06.938 +05:30 [INF] Received HTTP response headers after 441.1541ms - 200
2025-10-27 13:09:06.941 +05:30 [INF] End processing HTTP request after 455.1229ms - 200
2025-10-27 13:09:06.947 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:09:06.950 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:09:08.142 +05:30 [INF] Received HTTP response headers after 1211.0843ms - 200
2025-10-27 13:09:08.146 +05:30 [INF] End processing HTTP request after 1222.9268ms - 200
2025-10-27 13:10:27.694 +05:30 [INF] Received HTTP response headers after 80740.4724ms - 200
2025-10-27 13:10:27.698 +05:30 [INF] End processing HTTP request after 80751.268ms - 200
2025-10-27 13:10:47.226 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 13:10:47.252 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 113479.5785ms
2025-10-27 13:10:47.258 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:10:47.287 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 114190.794ms
2025-10-27 13:10:47.510 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:22:24.305 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:22:24.735 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:22:24.740 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:22:25.000 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:22:25.003 +05:30 [INF] Hosting environment: Test
2025-10-27 13:22:25.005 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:22:25.789 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:22:26.308 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 541.5696ms
2025-10-27 13:22:26.646 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:22:26.646 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:22:26.676 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 30.3325ms
2025-10-27 13:22:26.738 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 92.7464ms
2025-10-27 13:22:29.017 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:22:29.117 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.0699ms
2025-10-27 13:22:33.400 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:22:33.674 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:22:33.927 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:22:33.952 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 14.0524ms
2025-10-27 13:22:33.959 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:22:33.969 +05:30 [ERR] Connection id "0HNGL5N28CK3E", Request id "0HNGL5N28CK3E:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:22:34.051 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 651.1694ms
2025-10-27 13:22:37.970 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:22:37.993 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:22:38.010 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:22:38.019 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 2.2916ms
2025-10-27 13:22:38.025 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:22:38.030 +05:30 [ERR] Connection id "0HNGL5N28CK3E", Request id "0HNGL5N28CK3E:00000002": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:22:38.045 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 75.0479ms
2025-10-27 13:23:04.342 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:23:04.355 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:04.362 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:23:04.369 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 2.0508ms
2025-10-27 13:23:04.373 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:04.379 +05:30 [ERR] Connection id "0HNGL5N28CK3E", Request id "0HNGL5N28CK3E:00000003": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:23:04.390 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 47.7902ms
2025-10-27 13:23:10.918 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:23:10.975 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 56.721ms
2025-10-27 13:23:11.089 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:23:11.110 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:23:11.155 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 65.8575ms
2025-10-27 13:23:11.210 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 100.24ms
2025-10-27 13:23:11.619 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:23:11.667 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.5044ms
2025-10-27 13:23:11.668 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - null null
2025-10-27 13:23:11.770 +05:30 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-10-27 13:23:11.779 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/favicon-32x32.png - 200 628 image/png 110.601ms
2025-10-27 13:23:21.343 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:23:21.352 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:21.357 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:23:21.362 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 0.9526ms
2025-10-27 13:23:21.364 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:21.366 +05:30 [ERR] Connection id "0HNGL5N28CK3E", Request id "0HNGL5N28CK3E:00000004": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:23:21.377 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 34.744ms
2025-10-27 13:23:44.772 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:23:44.800 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:44.803 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:23:44.809 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 1.559ms
2025-10-27 13:23:44.812 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:23:44.817 +05:30 [ERR] Connection id "0HNGL5N28CK3E", Request id "0HNGL5N28CK3E:00000005": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:23:44.833 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 61.6124ms
2025-10-27 13:27:21.680 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:27:22.103 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:27:22.107 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:27:22.391 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:27:22.394 +05:30 [INF] Hosting environment: Test
2025-10-27 13:27:22.396 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:27:23.060 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:27:23.765 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 782.071ms
2025-10-27 13:27:23.809 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:27:23.833 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 23.2984ms
2025-10-27 13:27:23.992 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:27:24.117 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 125.4448ms
2025-10-27 13:27:26.579 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:27:26.783 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 204.7649ms
2025-10-27 13:27:30.751 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:27:31.083 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:27:31.486 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:27:37.175 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 13:27:44.743 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:27:44.746 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:27:44.751 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:27:44.755 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:27:46.084 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:27:46.095 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:27:46.136 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:27:46.141 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:27:46.149 +05:30 [INF] Waiting for parallel API calls...
2025-10-27 13:27:46.591 +05:30 [INF] Executed DbCommand (105ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 13:27:46.594 +05:30 [INF] Received HTTP response headers after 444.9115ms - 200
2025-10-27 13:27:46.599 +05:30 [INF] Received HTTP response headers after 500.3688ms - 200
2025-10-27 13:27:46.602 +05:30 [INF] End processing HTTP request after 465.9584ms - 200
2025-10-27 13:27:46.604 +05:30 [INF] End processing HTTP request after 524.5944ms - 200
2025-10-27 13:27:46.642 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:27:46.642 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:27:46.646 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:27:46.651 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:27:48.283 +05:30 [INF] Received HTTP response headers after 1626.7357ms - 200
2025-10-27 13:27:48.286 +05:30 [INF] End processing HTTP request after 1644.143ms - 200
2025-10-27 13:29:26.923 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 13:29:26.942 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 115443.554ms
2025-10-27 13:29:26.948 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:29:26.997 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 116246.6062ms
2025-10-27 13:29:27.215 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:32:30.513 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:32:30.989 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:32:30.992 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:32:31.310 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:32:31.315 +05:30 [INF] Hosting environment: Test
2025-10-27 13:32:31.317 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:32:32.165 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:32:32.620 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 486.1338ms
2025-10-27 13:32:32.973 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:32:32.973 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:32:32.993 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 19.8998ms
2025-10-27 13:32:33.072 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 99.6361ms
2025-10-27 13:32:35.671 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:32:35.801 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.8979ms
2025-10-27 13:32:40.630 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:32:40.898 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:32:41.262 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:32:44.290 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 13:32:46.775 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:32:46.779 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:32:46.783 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:32:46.786 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:32:48.663 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:32:48.680 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:32:48.701 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:32:48.704 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:32:48.723 +05:30 [INF] Waiting for parallel API calls...
2025-10-27 13:32:49.016 +05:30 [INF] Executed DbCommand (97ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 13:32:49.237 +05:30 [INF] Received HTTP response headers after 514.3416ms - 200
2025-10-27 13:32:49.237 +05:30 [INF] Received HTTP response headers after 551.809ms - 200
2025-10-27 13:32:49.244 +05:30 [INF] End processing HTTP request after 543.3177ms - 200
2025-10-27 13:32:49.245 +05:30 [INF] End processing HTTP request after 584.5955ms - 200
2025-10-27 13:32:49.276 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:32:49.276 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:32:49.279 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:32:49.282 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:32:50.874 +05:30 [INF] Received HTTP response headers after 1588.113ms - 200
2025-10-27 13:32:50.878 +05:30 [INF] End processing HTTP request after 1602.6425ms - 200
2025-10-27 13:34:29.593 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 13:34:29.616 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 108340.106ms
2025-10-27 13:34:29.621 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:34:29.652 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 109021.2833ms
2025-10-27 13:34:29.838 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:46:36.844 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:46:37.369 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:46:37.373 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:46:37.642 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:46:37.644 +05:30 [INF] Hosting environment: Test
2025-10-27 13:46:37.645 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:46:38.694 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:46:39.418 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 737.3547ms
2025-10-27 13:46:39.715 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:46:39.716 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:46:39.740 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 25.2265ms
2025-10-27 13:46:39.927 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 211.8215ms
2025-10-27 13:46:43.073 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:46:43.289 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 216.583ms
2025-10-27 13:46:44.453 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:46:44.738 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:46:45.174 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:46:47.866 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 13:46:50.262 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:46:50.265 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:46:50.267 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:46:50.273 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 13:46:51.708 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:46:51.715 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:46:51.777 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:46:51.780 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 13:46:52.164 +05:30 [INF] Executed DbCommand (138ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 13:46:52.495 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 13:46:52.665 +05:30 [INF] Received HTTP response headers after 940.9478ms - 200
2025-10-27 13:46:52.669 +05:30 [INF] Received HTTP response headers after 886.8096ms - 200
2025-10-27 13:46:52.673 +05:30 [INF] End processing HTTP request after 968.29ms - 200
2025-10-27 13:46:52.675 +05:30 [INF] End processing HTTP request after 897.1109ms - 200
2025-10-27 13:46:52.706 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:46:52.706 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:46:52.708 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 13:46:52.710 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 13:46:53.957 +05:30 [INF] Received HTTP response headers after 1245.8969ms - 200
2025-10-27 13:46:53.960 +05:30 [INF] End processing HTTP request after 1254.6244ms - 200
2025-10-27 13:48:33.091 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 13:48:33.135 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 107933.2247ms
2025-10-27 13:48:33.145 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:48:33.181 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 108727.3896ms
2025-10-27 13:48:33.403 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 13:52:49.410 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 13:52:49.866 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 13:52:49.869 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 13:52:50.052 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 13:52:50.054 +05:30 [INF] Hosting environment: Test
2025-10-27 13:52:50.056 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 13:52:50.853 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 13:52:51.296 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 469.4367ms
2025-10-27 13:52:51.595 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 13:52:51.596 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 13:52:51.629 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 33.8695ms
2025-10-27 13:52:51.684 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.732ms
2025-10-27 13:52:55.257 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 13:52:55.315 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.821ms
2025-10-27 13:53:10.818 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 13:53:11.072 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:53:11.404 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 13:53:11.427 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 11.5496ms
2025-10-27 13:53:11.432 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 13:53:11.440 +05:30 [ERR] Connection id "0HNGL6827VFNS", Request id "0HNGL6827VFNS:00000001": An unhandled exception was thrown by the application.
System.InvalidOperationException: A suitable constructor for type 'SriKanth.Service.SalesModule.ExternalApiService' could not be located. Ensure the type is concrete and all parameters of a public constructor are either registered as services or passed as arguments. Also ensure no extraneous arguments are provided.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.FindApplicableConstructor(Type instanceType, Type[] argumentTypes, ConstructorInfoEx[] constructors, ConstructorInfo& matchingConstructor, Nullable`1[]& matchingParameterMap)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactoryInternal(Type instanceType, Type[] argumentTypes, ParameterExpression& provider, ParameterExpression& argumentArray, Expression& factoryExpressionBody)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.CreateFactory(Type instanceType, Type[] argumentTypes)
   at System.Threading.LazyInitializer.EnsureInitializedCore[T](T& target, Boolean& initialized, Object& syncLock, Func`1 valueFactory)
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.Cache.get_Activator()
   at Microsoft.Extensions.Http.DefaultTypedHttpClientFactory`1.CreateClient(HttpClient httpClient)
   at Microsoft.Extensions.DependencyInjection.HttpClientBuilderExtensions.AddTransientHelper[TClient,TImplementation](IServiceProvider s, IHttpClientBuilder builder)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitDisposeCache(ServiceCallSite transientCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method22(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2025-10-27 13:53:11.523 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 0 null 705.5808ms
2025-10-27 14:03:12.227 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 14:03:12.638 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 14:03:12.642 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 14:03:13.381 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 14:03:13.440 +05:30 [INF] Hosting environment: Test
2025-10-27 14:03:13.454 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 14:03:14.031 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 14:03:14.574 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 14:03:14.582 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 555.8232ms
2025-10-27 14:03:14.648 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 74.9181ms
2025-10-27 14:03:14.807 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 14:03:15.077 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 270.741ms
2025-10-27 14:03:18.675 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:03:18.772 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 14:03:19.092 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 321.4282ms
2025-10-27 14:03:19.394 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:03:19.931 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:03:22.931 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:03:25.482 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:03:25.486 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:03:25.489 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:03:25.495 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:03:27.379 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:03:27.403 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:03:27.450 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:03:27.453 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:03:27.774 +05:30 [INF] Executed DbCommand (103ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:03:28.015 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:03:28.022 +05:30 [INF] Received HTTP response headers after 562.3895ms - 200
2025-10-27 14:03:28.027 +05:30 [INF] End processing HTTP request after 576.3919ms - 200
2025-10-27 14:03:28.066 +05:30 [INF] Received HTTP response headers after 661.0934ms - 200
2025-10-27 14:03:28.069 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:03:28.071 +05:30 [INF] End processing HTTP request after 696.0809ms - 200
2025-10-27 14:03:28.076 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:03:28.080 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:03:28.085 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:03:29.480 +05:30 [INF] Received HTTP response headers after 1391.7568ms - 200
2025-10-27 14:03:29.485 +05:30 [INF] End processing HTTP request after 1404.2279ms - 200
2025-10-27 14:05:22.481 +05:30 [INF] Received HTTP response headers after 114397.4795ms - 200
2025-10-27 14:05:22.485 +05:30 [INF] End processing HTTP request after 114416.1904ms - 200
2025-10-27 14:06:24.829 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:06:24.848 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 184906.7327ms
2025-10-27 14:06:24.856 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:06:24.881 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 186205.5337ms
2025-10-27 14:06:25.133 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:07:53.573 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:07:53.609 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:07:53.616 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:08:27.264 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:08:27.324 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:08:27.329 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:08:27.337 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:08:27.341 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:08:27.367 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:08:27.370 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:08:28.031 +05:30 [INF] Received HTTP response headers after 660.1992ms - 200
2025-10-27 14:08:28.036 +05:30 [INF] End processing HTTP request after 695.4964ms - 200
2025-10-27 14:08:28.040 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:08:28.043 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:08:28.083 +05:30 [INF] Received HTTP response headers after 750.6954ms - 200
2025-10-27 14:08:28.085 +05:30 [INF] End processing HTTP request after 761.0499ms - 200
2025-10-27 14:08:28.092 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:08:28.096 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:08:29.191 +05:30 [INF] Received HTTP response headers after 1091.6621ms - 200
2025-10-27 14:08:29.196 +05:30 [INF] End processing HTTP request after 1103.6701ms - 200
2025-10-27 14:09:49.962 +05:30 [INF] Received HTTP response headers after 81915.6042ms - 200
2025-10-27 14:09:49.966 +05:30 [INF] End processing HTTP request after 81926.5674ms - 200
2025-10-27 14:10:48.503 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:10:48.507 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 174885.263ms
2025-10-27 14:10:48.509 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:10:48.512 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 174939.8311ms
2025-10-27 14:10:48.574 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_ChangeTracker()
   at Microsoft.EntityFrameworkCore.DbContext.TryDetectChanges()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:12:45.648 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 14:12:46.184 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 14:12:46.188 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 14:12:46.410 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 14:12:46.413 +05:30 [INF] Hosting environment: Test
2025-10-27 14:12:46.414 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 14:12:47.334 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 14:12:47.723 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 411.4298ms
2025-10-27 14:12:48.006 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 14:12:48.006 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 14:12:48.022 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 16.7105ms
2025-10-27 14:12:48.100 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 94.8196ms
2025-10-27 14:12:50.607 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 14:12:50.656 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.0481ms
2025-10-27 14:13:09.106 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:13:09.305 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:13:09.628 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:13:11.706 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:13:13.772 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:13:13.775 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:13:13.779 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:13:13.781 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:13:15.008 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:13:15.022 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:13:15.299 +05:30 [INF] Executed DbCommand (101ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:13:15.491 +05:30 [INF] Received HTTP response headers after 459.929ms - 200
2025-10-27 14:13:15.495 +05:30 [INF] End processing HTTP request after 489.8543ms - 200
2025-10-27 14:13:15.527 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:13:15.529 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:13:16.524 +05:30 [INF] Received HTTP response headers after 993.3919ms - 200
2025-10-27 14:13:16.529 +05:30 [INF] End processing HTTP request after 1001.9599ms - 200
2025-10-27 14:13:19.286 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:13:19.307 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 9661.0814ms
2025-10-27 14:13:19.311 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:13:19.331 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 10225.1142ms
2025-10-27 14:13:19.472 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:14:42.662 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:14:42.683 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:14:42.689 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:14:44.645 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:14:44.686 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:14:44.690 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:14:47.419 +05:30 [INF] Executed DbCommand (2,727ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:14:47.739 +05:30 [INF] Received HTTP response headers after 3044.6971ms - 200
2025-10-27 14:14:47.743 +05:30 [INF] End processing HTTP request after 3056.9744ms - 200
2025-10-27 14:14:47.749 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:14:47.755 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:14:48.398 +05:30 [INF] Received HTTP response headers after 640.1195ms - 200
2025-10-27 14:14:48.402 +05:30 [INF] End processing HTTP request after 653.127ms - 200
2025-10-27 14:22:25.680 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 14:22:26.114 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 14:22:26.118 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 14:22:26.257 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 14:22:26.259 +05:30 [INF] Hosting environment: Test
2025-10-27 14:22:26.261 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 14:22:27.109 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 14:22:27.519 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 422.9077ms
2025-10-27 14:22:27.783 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 14:22:27.783 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 14:22:27.799 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 17.1529ms
2025-10-27 14:22:27.861 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 79.2647ms
2025-10-27 14:22:29.988 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 14:22:30.035 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 46.9938ms
2025-10-27 14:22:33.627 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:22:33.864 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:22:34.097 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:22:36.364 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:22:38.496 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:22:38.501 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:22:38.507 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:22:38.508 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:22:39.687 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:22:39.703 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:22:42.317 +05:30 [INF] Executed DbCommand (85ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:22:42.455 +05:30 [INF] Received HTTP response headers after 2746.9585ms - 200
2025-10-27 14:22:42.458 +05:30 [INF] End processing HTTP request after 2773.6672ms - 200
2025-10-27 14:22:42.493 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:22:42.496 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:22:43.621 +05:30 [INF] Received HTTP response headers after 1121.4635ms - 200
2025-10-27 14:22:43.636 +05:30 [INF] End processing HTTP request after 1142.0997ms - 200
2025-10-27 14:24:29.680 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 14:24:30.212 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 14:24:30.216 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 14:24:30.456 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 14:24:30.462 +05:30 [INF] Hosting environment: Test
2025-10-27 14:24:30.467 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 14:24:31.121 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 14:24:31.862 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 768.3915ms
2025-10-27 14:24:32.126 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 14:24:32.126 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 14:24:32.143 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 17.0969ms
2025-10-27 14:24:32.243 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 117.2259ms
2025-10-27 14:24:33.465 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:24:33.768 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:24:34.288 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:24:36.293 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 14:24:36.337 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:24:36.469 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.0436ms
2025-10-27 14:24:39.299 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:24:39.304 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:24:39.308 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:24:39.311 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:24:40.573 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:24:40.585 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:24:43.222 +05:30 [INF] Executed DbCommand (107ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:24:43.527 +05:30 [INF] Received HTTP response headers after 2934.4709ms - 200
2025-10-27 14:24:43.531 +05:30 [INF] End processing HTTP request after 2960.7296ms - 200
2025-10-27 14:24:43.557 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:24:43.559 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:24:44.980 +05:30 [INF] Received HTTP response headers after 1417.5951ms - 200
2025-10-27 14:24:44.984 +05:30 [INF] End processing HTTP request after 1427.6763ms - 200
2025-10-27 14:24:49.175 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:24:49.188 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 14:24:50.951 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:24:50.955 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:25:57.247 +05:30 [INF] Received HTTP response headers after 66288.8757ms - 200
2025-10-27 14:25:57.252 +05:30 [INF] End processing HTTP request after 66300.6243ms - 200
2025-10-27 14:26:22.209 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 14:26:22.262 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 107960.3894ms
2025-10-27 14:26:22.268 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:26:22.295 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 108831.3423ms
2025-10-27 14:26:22.441 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:43:13.292 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 14:43:13.672 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 14:43:13.678 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 14:43:13.791 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 14:43:13.795 +05:30 [INF] Hosting environment: Test
2025-10-27 14:43:13.797 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 14:43:14.868 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 14:43:15.180 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 328.712ms
2025-10-27 14:43:15.490 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 14:43:15.490 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 14:43:15.524 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 34.8424ms
2025-10-27 14:43:15.601 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 111.7365ms
2025-10-27 14:43:18.007 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 14:43:18.088 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 81.5784ms
2025-10-27 14:43:51.510 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:43:52.349 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:43:53.503 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:43:57.994 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:44:04.854 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:44:05.373 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:44:05.993 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:44:06.198 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 14:44:11.466 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:44:11.505 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:44:11.592 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:44:11.788 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:44:13.497 +05:30 [INF] Received HTTP response headers after 1974.7777ms - 200
2025-10-27 14:44:13.855 +05:30 [INF] Received HTTP response headers after 1900.4101ms - 200
2025-10-27 14:44:14.051 +05:30 [INF] End processing HTTP request after 2596.773ms - 200
2025-10-27 14:44:14.053 +05:30 [INF] End processing HTTP request after 2460.5732ms - 200
2025-10-27 14:44:14.220 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:44:14.220 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:44:14.319 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:44:14.323 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:44:14.971 +05:30 [INF] Executed DbCommand (750ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:44:15.668 +05:30 [INF] Executed DbCommand (11ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:44:15.946 +05:30 [INF] Received HTTP response headers after 1614.2285ms - 200
2025-10-27 14:44:16.147 +05:30 [INF] End processing HTTP request after 1927.051ms - 200
2025-10-27 14:45:31.159 +05:30 [INF] Received HTTP response headers after 76823.0064ms - 200
2025-10-27 14:45:31.167 +05:30 [INF] End processing HTTP request after 76946.1388ms - 200
2025-10-27 14:45:54.723 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:45:54.775 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 121042.5937ms
2025-10-27 14:45:54.791 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:45:54.824 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 123315.1253ms
2025-10-27 14:45:55.109 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:46:57.571 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:46:57.592 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:46:57.596 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:47:00.876 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:47:02.397 +05:30 [INF] Executed DbCommand (681ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:47:02.398 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:47:02.423 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:47:02.426 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:47:03.127 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:47:03.129 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:47:04.155 +05:30 [INF] Received HTTP response headers after 1728.3454ms - 200
2025-10-27 14:47:04.158 +05:30 [INF] End processing HTTP request after 1760.7863ms - 200
2025-10-27 14:47:04.163 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:47:04.169 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:47:04.222 +05:30 [INF] Received HTTP response headers after 1089.5388ms - 200
2025-10-27 14:47:04.226 +05:30 [INF] End processing HTTP request after 1099.2569ms - 200
2025-10-27 14:47:04.232 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:47:04.238 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:47:05.482 +05:30 [INF] Received HTTP response headers after 1309.3791ms - 200
2025-10-27 14:47:05.486 +05:30 [INF] End processing HTTP request after 1323.4341ms - 200
2025-10-27 14:48:14.497 +05:30 [INF] Received HTTP response headers after 70255.5057ms - 200
2025-10-27 14:48:14.501 +05:30 [INF] End processing HTTP request after 70268.8132ms - 200
2025-10-27 14:49:00.297 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 14:49:02.409 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 14:49:02.444 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 124842.526ms
2025-10-27 14:49:02.448 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:49:02.450 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 124879.1081ms
2025-10-27 14:49:02.540 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:49:12.340 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:49:12.353 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:49:12.364 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:49:14.084 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:49:16.070 +05:30 [INF] Executed DbCommand (884ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:49:16.071 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:49:16.079 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:49:16.082 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:49:16.885 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:49:16.895 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:49:18.049 +05:30 [INF] Received HTTP response headers after 1966.3377ms - 200
2025-10-27 14:49:18.053 +05:30 [INF] End processing HTTP request after 1982.7136ms - 200
2025-10-27 14:49:18.056 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:49:18.059 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:49:18.103 +05:30 [INF] Received HTTP response headers after 1205.9047ms - 200
2025-10-27 14:49:18.110 +05:30 [INF] End processing HTTP request after 1224.9046ms - 200
2025-10-27 14:49:18.114 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:49:18.116 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:49:19.642 +05:30 [INF] Received HTTP response headers after 1578.3795ms - 200
2025-10-27 14:49:19.645 +05:30 [INF] End processing HTTP request after 1588.4163ms - 200
2025-10-27 14:50:30.782 +05:30 [INF] Received HTTP response headers after 72663.9057ms - 200
2025-10-27 14:50:30.786 +05:30 [INF] End processing HTTP request after 72671.9508ms - 200
2025-10-27 14:50:58.328 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:50:58.334 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 105965.6866ms
2025-10-27 14:50:58.338 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:50:58.341 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 106000.2143ms
2025-10-27 14:50:58.459 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:51:26.457 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:51:26.470 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:51:26.472 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:51:28.647 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:51:30.377 +05:30 [INF] Executed DbCommand (855ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:51:30.377 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:51:30.386 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:51:30.387 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:51:31.072 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:51:31.077 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:51:32.072 +05:30 [INF] Received HTTP response headers after 1682.5294ms - 200
2025-10-27 14:51:32.077 +05:30 [INF] End processing HTTP request after 1699.7115ms - 200
2025-10-27 14:51:32.083 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:51:32.088 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:51:32.153 +05:30 [INF] Received HTTP response headers after 1070.1209ms - 200
2025-10-27 14:51:32.161 +05:30 [INF] End processing HTTP request after 1089.2066ms - 200
2025-10-27 14:51:32.168 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:51:32.174 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:51:33.391 +05:30 [INF] Received HTTP response headers after 1298.9177ms - 200
2025-10-27 14:51:33.393 +05:30 [INF] End processing HTTP request after 1310.1045ms - 200
2025-10-27 14:52:48.047 +05:30 [INF] Received HTTP response headers after 75868.2464ms - 200
2025-10-27 14:52:48.057 +05:30 [INF] End processing HTTP request after 75889.6779ms - 200
2025-10-27 14:53:12.328 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:53:12.332 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 105858.2406ms
2025-10-27 14:53:12.335 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:53:12.337 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 105879.6982ms
2025-10-27 14:53:12.508 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 14:53:22.883 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 14:53:22.890 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:53:22.892 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 14:53:24.995 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 14:53:26.885 +05:30 [INF] Executed DbCommand (585ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 14:53:26.886 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:53:26.899 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:53:26.900 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 14:53:27.432 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:53:27.435 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 14:53:28.459 +05:30 [INF] Received HTTP response headers after 1554.9525ms - 200
2025-10-27 14:53:28.462 +05:30 [INF] End processing HTTP request after 1576.5812ms - 200
2025-10-27 14:53:28.466 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:53:28.469 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 14:53:28.586 +05:30 [INF] Received HTTP response headers after 1149.0005ms - 200
2025-10-27 14:53:28.592 +05:30 [INF] End processing HTTP request after 1159.7488ms - 200
2025-10-27 14:53:28.594 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:53:28.598 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 14:53:29.783 +05:30 [INF] Received HTTP response headers after 1311.6ms - 200
2025-10-27 14:53:29.787 +05:30 [INF] End processing HTTP request after 1320.8057ms - 200
2025-10-27 14:54:52.855 +05:30 [INF] Received HTTP response headers after 84253.2422ms - 200
2025-10-27 14:54:52.859 +05:30 [INF] End processing HTTP request after 84265.4416ms - 200
2025-10-27 14:55:08.773 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 14:55:08.779 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 105883.4161ms
2025-10-27 14:55:08.781 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 14:55:08.783 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 105900.1354ms
2025-10-27 14:55:08.845 +05:30 [INF] Executed DbCommand (59ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-27 14:55:09.075 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:03:13.924 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:03:14.321 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:03:14.325 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:03:14.758 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:03:14.762 +05:30 [INF] Hosting environment: Test
2025-10-27 15:03:14.764 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:03:15.336 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:03:15.827 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 511.0251ms
2025-10-27 15:03:16.060 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:03:16.060 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:03:16.075 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 15.7655ms
2025-10-27 15:03:16.169 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 109.4074ms
2025-10-27 15:03:18.807 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:03:18.879 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.4589ms
2025-10-27 15:03:39.615 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:03:40.155 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:03:40.161 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:03:40.449 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:03:40.452 +05:30 [INF] Hosting environment: Test
2025-10-27 15:03:40.453 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:03:40.828 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:03:41.532 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 724.8151ms
2025-10-27 15:03:41.793 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:03:41.793 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:03:41.821 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 27.991ms
2025-10-27 15:03:41.878 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 85.7599ms
2025-10-27 15:03:46.362 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:03:46.432 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.633ms
2025-10-27 15:03:58.934 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:03:59.158 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 15:03:59.614 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:04:01.535 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 15:04:04.065 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:04:04.068 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:04:04.071 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:04:04.081 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:04:05.477 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:04:05.487 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:04:06.132 +05:30 [INF] Received HTTP response headers after 622.1027ms - 200
2025-10-27 15:04:06.136 +05:30 [INF] End processing HTTP request after 662.6215ms - 200
2025-10-27 15:04:06.172 +05:30 [INF] Executed DbCommand (156ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:04:06.175 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:04:06.186 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:04:07.479 +05:30 [INF] Received HTTP response headers after 1291.3017ms - 200
2025-10-27 15:04:07.484 +05:30 [INF] End processing HTTP request after 1309.5933ms - 200
2025-10-27 15:04:08.705 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 15:04:08.715 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 15:04:08.723 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:04:08.727 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:05:20.100 +05:30 [INF] Received HTTP response headers after 71371.2259ms - 200
2025-10-27 15:05:20.104 +05:30 [INF] End processing HTTP request after 71380.5068ms - 200
2025-10-27 15:05:35.855 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 15:05:35.996 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 96364.3988ms
2025-10-27 15:05:36.016 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 15:05:36.080 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 97146.012ms
2025-10-27 15:05:36.269 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:06:40.258 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:06:40.279 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 15:06:40.284 +05:30 [INF] Route matched with {action = "GetCustomersDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCustomersDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:06:42.001 +05:30 [INF] Retrieving filtered customers for user 1
2025-10-27 15:06:42.047 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:06:42.051 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:06:42.057 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:06:42.510 +05:30 [INF] Received HTTP response headers after 454.8509ms - 200
2025-10-27 15:06:42.514 +05:30 [INF] End processing HTTP request after 466.3ms - 200
2025-10-27 15:06:42.518 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:06:42.521 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:06:44.000 +05:30 [INF] Received HTTP response headers after 1476.0177ms - 200
2025-10-27 15:06:44.003 +05:30 [INF] End processing HTTP request after 1485.9604ms - 200
2025-10-27 15:06:46.932 +05:30 [INF] Executed DbCommand (4ms) [Parameters=[@__userRoleId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserRoleName]
FROM [UserRole] AS [u]
WHERE [u].[UserRoleID] = @__userRoleId_0
2025-10-27 15:06:46.938 +05:30 [INF] Admin user 1 accessing all customers
2025-10-27 15:06:46.941 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:06:46.946 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:08:05.642 +05:30 [INF] Received HTTP response headers after 78692.9595ms - 200
2025-10-27 15:08:05.647 +05:30 [INF] End processing HTTP request after 78705.8955ms - 200
2025-10-27 15:08:37.584 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.OrderCustomer, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 15:08:37.636 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API) in 117347.765ms
2025-10-27 15:08:37.755 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetCustomersDetailsByUser (SriKanth.API)'
2025-10-27 15:08:37.811 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetCustomersDetailsByUser?userId=1 - 200 null application/json; charset=utf-8 117553.1833ms
2025-10-27 15:08:39.234 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:16:26.333 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:16:26.877 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:16:26.886 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:16:27.158 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:16:27.161 +05:30 [INF] Hosting environment: Test
2025-10-27 15:16:27.171 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:16:28.177 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:16:28.613 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 460.8797ms
2025-10-27 15:16:28.657 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:16:28.701 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 44.2309ms
2025-10-27 15:16:28.825 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:16:28.960 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 137.0764ms
2025-10-27 15:16:31.831 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:16:31.968 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 136.5278ms
2025-10-27 15:17:20.228 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:17:20.519 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:17:20.879 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:17:22.967 +05:30 [INF] Beginning to retrieve filtered order details for user 1
2025-10-27 15:17:25.162 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:17:25.165 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:17:25.167 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:17:25.170 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:17:56.178 +05:30 [ERR] An error occurred using the connection to database 'SriKanthaSalesApp' on server 'VIN1\MSSQLEX22_VI_N1'.
2025-10-27 15:17:56.270 +05:30 [ERR] An exception occurred while iterating over the results of a query for context type 'SriKanth.Model.SriKanthDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2025-10-27 15:17:56.409 +05:30 [ERR] Failed to retrieve filtered order details for user 1
Microsoft.Data.SqlClient.SqlException (0x80131904): A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.Connect(ServerInfo serverInfo, SqlInternalConnectionTds connHandler, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnectionString connectionOptions, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.GetUserByIdAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 41
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 216
ClientConnectionId:00000000-0000-0000-0000-000000000000
Error Number:-1,State:0,Class:20
2025-10-27 15:17:56.584 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 15:17:56.605 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 35713.236ms
2025-10-27 15:17:56.612 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:17:56.646 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 36419.0396ms
2025-10-27 15:17:57.094 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:18:37.420 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:18:37.775 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:18:37.779 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:18:38.039 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:18:38.052 +05:30 [INF] Hosting environment: Test
2025-10-27 15:18:38.054 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:18:38.625 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:18:39.087 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 478.7973ms
2025-10-27 15:18:39.455 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:18:39.455 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:18:39.532 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 67.1043ms
2025-10-27 15:18:39.656 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 201.4569ms
2025-10-27 15:18:42.035 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:18:42.391 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:18:42.941 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:18:45.165 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:18:45.183 +05:30 [INF] Beginning to retrieve filtered order details for user 1
2025-10-27 15:18:46.223 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 1057.6664ms
2025-10-27 15:18:47.925 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:18:47.929 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:18:47.931 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:18:47.935 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:18:49.406 +05:30 [INF] Executed DbCommand (99ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:18:51.525 +05:30 [INF] Executed DbCommand (26ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-10-27 15:18:51.559 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.568 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.589 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.593 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.605 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.610 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.621 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.626 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.637 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:51.640 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:18:52.207 +05:30 [INF] Received HTTP response headers after 569.4953ms - 200
2025-10-27 15:18:52.207 +05:30 [INF] Received HTTP response headers after 586.7054ms - 200
2025-10-27 15:18:52.213 +05:30 [INF] End processing HTTP request after 608.1272ms - 200
2025-10-27 15:18:52.213 +05:30 [INF] End processing HTTP request after 592.3792ms - 200
2025-10-27 15:18:52.246 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:18:52.246 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:18:52.249 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:18:52.251 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:18:52.266 +05:30 [INF] Received HTTP response headers after 692.8167ms - 200
2025-10-27 15:18:52.270 +05:30 [INF] End processing HTTP request after 713.4579ms - 200
2025-10-27 15:18:52.273 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:18:52.274 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:18:52.291 +05:30 [INF] Received HTTP response headers after 694.8346ms - 200
2025-10-27 15:18:52.297 +05:30 [INF] End processing HTTP request after 708.1633ms - 200
2025-10-27 15:18:52.301 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:18:52.311 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:18:52.313 +05:30 [INF] Received HTTP response headers after 670.0884ms - 200
2025-10-27 15:18:52.319 +05:30 [INF] End processing HTTP request after 682.2313ms - 200
2025-10-27 15:18:52.322 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:18:52.324 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:18:53.286 +05:30 [INF] Received HTTP response headers after 1010.7175ms - 200
2025-10-27 15:18:53.290 +05:30 [INF] End processing HTTP request after 1017.2351ms - 200
2025-10-27 15:18:53.766 +05:30 [INF] Received HTTP response headers after 1510.8442ms - 200
2025-10-27 15:18:53.771 +05:30 [INF] End processing HTTP request after 1525.7062ms - 200
2025-10-27 15:18:53.783 +05:30 [INF] Received HTTP response headers after 1469.2247ms - 200
2025-10-27 15:18:53.787 +05:30 [INF] End processing HTTP request after 1485.8698ms - 200
2025-10-27 15:18:53.951 +05:30 [INF] Received HTTP response headers after 1626.4515ms - 200
2025-10-27 15:18:53.958 +05:30 [INF] End processing HTTP request after 1635.7144ms - 200
2025-10-27 15:18:59.130 +05:30 [INF] Received HTTP response headers after 6876.7477ms - 200
2025-10-27 15:18:59.134 +05:30 [INF] End processing HTTP request after 6888.5641ms - 200
2025-10-27 15:19:06.440 +05:30 [WRN] No location data found for user 1
2025-10-27 15:19:06.499 +05:30 [ERR] Failed to retrieve filtered order details for user 1
System.InvalidOperationException: No valid location data found for user.
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 260
2025-10-27 15:19:06.664 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 15:19:06.685 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 23728.3158ms
2025-10-27 15:19:06.689 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:19:06.713 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 24678.8071ms
2025-10-27 15:19:06.929 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:19:27.051 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:19:27.080 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:19:27.090 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:19:37.035 +05:30 [INF] Beginning to retrieve filtered order details for user 1
2025-10-27 15:19:37.983 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:19:38.706 +05:30 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-10-27 15:19:38.714 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.717 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.732 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.736 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.746 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.750 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.759 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.763 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.776 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:38.781 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:19:40.773 +05:30 [INF] Received HTTP response headers after 2019.4515ms - 200
2025-10-27 15:19:40.773 +05:30 [INF] Received HTTP response headers after 2051.4268ms - 200
2025-10-27 15:19:40.773 +05:30 [INF] Received HTTP response headers after 1988.7343ms - 200
2025-10-27 15:19:40.774 +05:30 [INF] Received HTTP response headers after 2005.5257ms - 200
2025-10-27 15:19:40.783 +05:30 [INF] Received HTTP response headers after 2041.1447ms - 200
2025-10-27 15:19:40.849 +05:30 [INF] End processing HTTP request after 2102.7596ms - 200
2025-10-27 15:19:40.853 +05:30 [INF] End processing HTTP request after 2139.7241ms - 200
2025-10-27 15:19:40.857 +05:30 [INF] End processing HTTP request after 2080.8734ms - 200
2025-10-27 15:19:40.861 +05:30 [INF] End processing HTTP request after 2102.0858ms - 200
2025-10-27 15:19:40.866 +05:30 [INF] End processing HTTP request after 2134.7279ms - 200
2025-10-27 15:19:40.871 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:19:40.874 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:19:40.878 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:19:40.882 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:19:40.886 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:19:40.889 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:19:40.895 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:19:40.900 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:19:40.905 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:19:40.908 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:19:41.378 +05:30 [INF] Received HTTP response headers after 459.3138ms - 200
2025-10-27 15:19:41.383 +05:30 [INF] End processing HTTP request after 508.8207ms - 200
2025-10-27 15:19:41.730 +05:30 [INF] Received HTTP response headers after 799.5527ms - 200
2025-10-27 15:19:41.736 +05:30 [INF] End processing HTTP request after 853.7893ms - 200
2025-10-27 15:19:42.416 +05:30 [INF] Received HTTP response headers after 1492.1213ms - 200
2025-10-27 15:19:42.421 +05:30 [INF] End processing HTTP request after 1542.9957ms - 200
2025-10-27 15:19:42.803 +05:30 [INF] Received HTTP response headers after 1866.8966ms - 200
2025-10-27 15:19:42.810 +05:30 [INF] End processing HTTP request after 1923.4699ms - 200
2025-10-27 15:19:47.900 +05:30 [INF] Received HTTP response headers after 6987.6168ms - 200
2025-10-27 15:19:47.903 +05:30 [INF] End processing HTTP request after 7032.687ms - 200
2025-10-27 15:20:47.948 +05:30 [WRN] No location data found for user 1
2025-10-27 15:20:47.997 +05:30 [ERR] Failed to retrieve filtered order details for user 1
System.InvalidOperationException: No valid location data found for user.
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 260
2025-10-27 15:20:48.109 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 15:20:48.116 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 81020.9523ms
2025-10-27 15:20:48.120 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:20:48.124 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 81073.0012ms
2025-10-27 15:20:48.270 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:20:51.863 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:20:51.879 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:20:51.890 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:20:54.067 +05:30 [INF] Beginning to retrieve filtered order details for user 1
2025-10-27 15:20:55.039 +05:30 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:20:55.925 +05:30 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-10-27 15:20:55.939 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:55.943 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:55.952 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:55.970 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:55.982 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:55.988 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:56.003 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:56.009 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:56.022 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:56.028 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:20:57.231 +05:30 [INF] Received HTTP response headers after 1194.0961ms - 200
2025-10-27 15:20:57.242 +05:30 [INF] End processing HTTP request after 1220.5081ms - 200
2025-10-27 15:20:57.242 +05:30 [INF] Received HTTP response headers after 1226.3741ms - 200
2025-10-27 15:20:57.253 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:20:57.256 +05:30 [INF] End processing HTTP request after 1253.6171ms - 200
2025-10-27 15:20:57.261 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:20:57.267 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:20:57.277 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:20:57.305 +05:30 [INF] Received HTTP response headers after 1313.3787ms - 200
2025-10-27 15:20:57.305 +05:30 [INF] Received HTTP response headers after 1330.2385ms - 200
2025-10-27 15:20:57.318 +05:30 [INF] End processing HTTP request after 1336.3069ms - 200
2025-10-27 15:20:57.323 +05:30 [INF] End processing HTTP request after 1370.7656ms - 200
2025-10-27 15:20:57.326 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:20:57.337 +05:30 [INF] Received HTTP response headers after 1390.9563ms - 200
2025-10-27 15:20:57.338 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:20:57.341 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:20:57.346 +05:30 [INF] End processing HTTP request after 1405.6827ms - 200
2025-10-27 15:20:57.351 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:20:57.426 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:20:57.444 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:20:58.171 +05:30 [INF] Received HTTP response headers after 715.8475ms - 200
2025-10-27 15:20:58.177 +05:30 [INF] End processing HTTP request after 750.6748ms - 200
2025-10-27 15:20:58.639 +05:30 [INF] Received HTTP response headers after 1203.281ms - 200
2025-10-27 15:20:58.643 +05:30 [INF] End processing HTTP request after 1304.6268ms - 200
2025-10-27 15:20:58.778 +05:30 [INF] Received HTTP response headers after 1509.7931ms - 200
2025-10-27 15:20:58.783 +05:30 [INF] End processing HTTP request after 1529.5902ms - 200
2025-10-27 15:20:59.025 +05:30 [INF] Received HTTP response headers after 1735.6919ms - 200
2025-10-27 15:20:59.029 +05:30 [INF] End processing HTTP request after 1761.7993ms - 200
2025-10-27 15:21:04.156 +05:30 [INF] Received HTTP response headers after 6802.2043ms - 200
2025-10-27 15:21:04.158 +05:30 [INF] End processing HTTP request after 6832.0068ms - 200
2025-10-27 15:21:36.927 +05:30 [WRN] No location data found for user 1
2025-10-27 15:22:03.978 +05:30 [ERR] Failed to retrieve filtered order details for user 1
System.InvalidOperationException: No valid location data found for user.
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 260
2025-10-27 15:22:04.095 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 15:22:04.113 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 72219.4849ms
2025-10-27 15:22:04.116 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:22:04.121 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 72258.2672ms
2025-10-27 15:22:04.214 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:22:07.269 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - text/plain 87
2025-10-27 15:22:07.276 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:22:07.281 +05:30 [INF] Route matched with {action = "GetOrderCreationDetailsByUser", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetOrderCreationDetailsByUser(Int32) on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:22:09.521 +05:30 [INF] Beginning to retrieve filtered order details for user 1
2025-10-27 15:22:13.935 +05:30 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserID], [u].[CreatedAt], [u].[Email], [u].[FailedLoginCount], [u].[FirstName], [u].[IsActive], [u].[IsEmailVerified], [u].[IsLocked], [u].[IsPhoneNumberVerified], [u].[LastLoginAt], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RememberMe], [u].[SalesPersonCode], [u].[UserRoleId], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[UserID] = @__p_0
2025-10-27 15:22:23.331 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[LocationCode]
FROM [UserLocation] AS [u]
WHERE [u].[UserId] = @__userId_0
2025-10-27 15:22:56.098 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.108 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.123 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.128 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.137 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.141 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.147 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.153 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.159 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:22:56.162 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:23:03.786 +05:30 [INF] Received HTTP response headers after 7642.4133ms - 200
2025-10-27 15:23:03.791 +05:30 [INF] End processing HTTP request after 7653.7517ms - 200
2025-10-27 15:23:03.799 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:23:03.803 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:23:03.855 +05:30 [INF] Received HTTP response headers after 7699.7204ms - 200
2025-10-27 15:23:03.857 +05:30 [INF] End processing HTTP request after 7710.0778ms - 200
2025-10-27 15:23:03.862 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:23:03.867 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:23:03.875 +05:30 [INF] Received HTTP response headers after 7743.5061ms - 200
2025-10-27 15:23:03.880 +05:30 [INF] End processing HTTP request after 7757.334ms - 200
2025-10-27 15:23:03.883 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:23:03.886 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:23:03.898 +05:30 [INF] Received HTTP response headers after 7780.2658ms - 200
2025-10-27 15:23:03.903 +05:30 [INF] End processing HTTP request after 7804.6228ms - 200
2025-10-27 15:23:03.905 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:23:03.908 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:23:03.941 +05:30 [INF] Received HTTP response headers after 7772.9518ms - 200
2025-10-27 15:23:03.949 +05:30 [INF] End processing HTTP request after 7790.2635ms - 200
2025-10-27 15:23:03.957 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:23:03.961 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:23:04.616 +05:30 [INF] Received HTTP response headers after 694.8177ms - 200
2025-10-27 15:23:04.672 +05:30 [INF] End processing HTTP request after 766.8654ms - 200
2025-10-27 15:23:05.057 +05:30 [INF] Received HTTP response headers after 1169.0223ms - 200
2025-10-27 15:23:05.124 +05:30 [INF] Received HTTP response headers after 1253.8291ms - 200
2025-10-27 15:23:05.124 +05:30 [INF] Received HTTP response headers after 1151.4939ms - 200
2025-10-27 15:23:05.144 +05:30 [INF] End processing HTTP request after 1186.9181ms - 200
2025-10-27 15:23:05.137 +05:30 [INF] End processing HTTP request after 1275.3193ms - 200
2025-10-27 15:23:05.128 +05:30 [INF] End processing HTTP request after 1244.3184ms - 200
2025-10-27 15:23:09.969 +05:30 [INF] Received HTTP response headers after 6164.0749ms - 200
2025-10-27 15:23:09.972 +05:30 [INF] End processing HTTP request after 6172.9132ms - 200
2025-10-27 15:24:20.791 +05:30 [WRN] No location data found for user 1
2025-10-27 15:24:20.860 +05:30 [ERR] Failed to retrieve filtered order details for user 1
System.InvalidOperationException: No valid location data found for user.
   at SriKanth.Service.SalesModule.BusinessApiService.GetFilteredOrderCreationDetailsAsync(Int32 userId) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\SalesModule\BusinessApiService.cs:line 260
2025-10-27 15:24:20.974 +05:30 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-10-27 15:24:20.985 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API) in 133699.0225ms
2025-10-27 15:24:21.001 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetOrderCreationDetailsByUser (SriKanth.API)'
2025-10-27 15:24:21.013 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetOrderCreationDetailsByUser?userId=1 - 500 null text/plain; charset=utf-8 133744.2014ms
2025-10-27 15:24:21.331 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed context instance. A common cause of this error is disposing a context instance that was resolved from dependency injection and then later trying to use the same context instance elsewhere in your application. This may occur if you are calling 'Dispose' on the context instance, or wrapping it in a using statement. If you are using dependency injection, you should let the dependency injection container take care of disposing context instances.
Object name: 'SriKanthDbContext'.
   at Microsoft.EntityFrameworkCore.DbContext.CheckDisposed()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 161
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:24:37.304 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/api/Business/GetListOfOrderCreationDetails - null null
2025-10-27 15:24:37.355 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-10-27 15:24:37.375 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-10-27 15:24:37.379 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/api/Business/GetListOfOrderCreationDetails - 401 0 null 79.7456ms
2025-10-27 15:25:00.432 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetListOfOrderCreationDetails - text/plain 87
2025-10-27 15:25:00.442 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetListOfOrderCreationDetails (SriKanth.API)'
2025-10-27 15:25:00.461 +05:30 [INF] Route matched with {action = "GetListOfOrderCreationDetails", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetListOfOrderCreationDetails() on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:25:02.207 +05:30 [INF] Beginning to retrieve order creation details
2025-10-27 15:25:02.211 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.222 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.233 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.240 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.251 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.257 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.266 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.269 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.277 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.282 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:25:02.839 +05:30 [INF] Received HTTP response headers after 577.3889ms - 200
2025-10-27 15:25:02.839 +05:30 [INF] Received HTTP response headers after 565.8421ms - 200
2025-10-27 15:25:02.843 +05:30 [INF] End processing HTTP request after 592.2749ms - 200
2025-10-27 15:25:02.851 +05:30 [INF] End processing HTTP request after 585.0964ms - 200
2025-10-27 15:25:02.854 +05:30 [INF] Received HTTP response headers after 628.3023ms - 200
2025-10-27 15:25:02.855 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:25:02.859 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:25:02.866 +05:30 [INF] End processing HTTP request after 654.9715ms - 200
2025-10-27 15:25:02.868 +05:30 [INF] Received HTTP response headers after 581.6135ms - 200
2025-10-27 15:25:02.869 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:25:02.873 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:25:02.877 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:25:02.886 +05:30 [INF] End processing HTTP request after 609.7466ms - 200
2025-10-27 15:25:02.902 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:25:02.905 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:25:02.917 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:25:02.928 +05:30 [INF] Received HTTP response headers after 682.7921ms - 200
2025-10-27 15:25:02.937 +05:30 [INF] End processing HTTP request after 704.0918ms - 200
2025-10-27 15:25:02.939 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:25:02.941 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/customers
2025-10-27 15:25:03.508 +05:30 [INF] Received HTTP response headers after 599.4937ms - 200
2025-10-27 15:25:03.511 +05:30 [INF] End processing HTTP request after 634.7769ms - 200
2025-10-27 15:25:03.786 +05:30 [INF] Received HTTP response headers after 892.3651ms - 200
2025-10-27 15:25:03.790 +05:30 [INF] End processing HTTP request after 930.6282ms - 200
2025-10-27 15:25:03.911 +05:30 [INF] Received HTTP response headers after 990.8637ms - 200
2025-10-27 15:25:03.915 +05:30 [INF] End processing HTTP request after 1009.4589ms - 200
2025-10-27 15:25:04.116 +05:30 [INF] Received HTTP response headers after 1171.8071ms - 200
2025-10-27 15:25:04.120 +05:30 [INF] End processing HTTP request after 1181.0686ms - 200
2025-10-27 15:25:09.269 +05:30 [INF] Received HTTP response headers after 6380.6094ms - 200
2025-10-27 15:25:09.274 +05:30 [INF] End processing HTTP request after 6418.1094ms - 200
2025-10-27 15:25:13.599 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:25:13.603 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/postedInvoices?$expand=postedInvoiceLines
2025-10-27 15:26:26.415 +05:30 [INF] Received HTTP response headers after 72808.1609ms - 200
2025-10-27 15:26:26.418 +05:30 [INF] End processing HTTP request after 72819.471ms - 200
2025-10-27 15:27:10.486 +05:30 [INF] Retrieved order creation details with 4 locations, 1592 customers, and 6761 items
2025-10-27 15:27:11.427 +05:30 [INF] Executing OkObjectResult, writing value of type 'SriKanth.Model.BusinessModule.DTOs.OrderCreationDetails'.
2025-10-27 15:27:11.464 +05:30 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 4000), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UserHistory] ([ActionType], [Endpoint], [EntityType], [IPAddress], [Timestamp], [UserId])
OUTPUT INSERTED.[UserHistoryId]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-10-27 15:27:11.616 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetListOfOrderCreationDetails (SriKanth.API) in 131149.0758ms
2025-10-27 15:27:11.619 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetListOfOrderCreationDetails (SriKanth.API)'
2025-10-27 15:27:11.622 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetListOfOrderCreationDetails - 200 null application/json; charset=utf-8 131189.7255ms
2025-10-27 15:40:55.688 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:40:56.315 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:40:56.319 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:40:56.910 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:40:57.343 +05:30 [INF] Hosting environment: Test
2025-10-27 15:40:57.354 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:40:57.539 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:40:58.067 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 555.2937ms
2025-10-27 15:40:58.215 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:40:58.247 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 31.75ms
2025-10-27 15:40:58.282 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:40:58.480 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 198.0725ms
2025-10-27 15:41:01.620 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:41:01.866 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.8389ms
2025-10-27 15:41:47.334 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetStockDetails - text/plain 87
2025-10-27 15:41:47.722 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API)'
2025-10-27 15:41:48.328 +05:30 [INF] Route matched with {action = "GetStockDetails", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStockDetails() on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:41:48.638 +05:30 [INF] Beginning to retrieve sales stock details
2025-10-27 15:41:48.684 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.696 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.725 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.729 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.747 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.752 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.764 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:48.773 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:41:49.227 +05:30 [INF] Received HTTP response headers after 482.1741ms - 200
2025-10-27 15:41:49.255 +05:30 [INF] End processing HTTP request after 529.794ms - 200
2025-10-27 15:41:49.266 +05:30 [INF] Received HTTP response headers after 509.3207ms - 200
2025-10-27 15:41:49.277 +05:30 [INF] End processing HTTP request after 530.298ms - 200
2025-10-27 15:41:49.280 +05:30 [INF] Received HTTP response headers after 502.1573ms - 200
2025-10-27 15:41:49.293 +05:30 [INF] Received HTTP response headers after 592.7308ms - 200
2025-10-27 15:41:49.295 +05:30 [INF] End processing HTTP request after 530.6783ms - 200
2025-10-27 15:41:49.299 +05:30 [INF] End processing HTTP request after 628.5486ms - 200
2025-10-27 15:41:49.320 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:41:49.322 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:41:49.322 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:41:49.322 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:41:49.327 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:41:49.331 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:41:49.333 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:41:49.340 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:41:50.148 +05:30 [INF] Received HTTP response headers after 800.0686ms - 200
2025-10-27 15:41:50.153 +05:30 [INF] End processing HTTP request after 830.6ms - 200
2025-10-27 15:41:50.781 +05:30 [INF] Received HTTP response headers after 1426.3923ms - 200
2025-10-27 15:41:50.790 +05:30 [INF] End processing HTTP request after 1467.6138ms - 200
2025-10-27 15:41:50.835 +05:30 [INF] Received HTTP response headers after 1460.5951ms - 200
2025-10-27 15:41:50.837 +05:30 [INF] End processing HTTP request after 1514.4903ms - 200
2025-10-27 15:42:02.441 +05:30 [INF] Received HTTP response headers after 13096.4179ms - 200
2025-10-27 15:42:02.445 +05:30 [INF] End processing HTTP request after 13124.6613ms - 200
2025-10-27 15:42:14.350 +05:30 [INF] API calls completed in 25707ms
2025-10-27 15:42:14.597 +05:30 [INF] Filtered to 4 valid locations in 187ms
2025-10-27 15:42:14.647 +05:30 [INF] Built inventory lookup (10883 items) in 42ms
2025-10-27 15:42:14.725 +05:30 [INF] Built price lookup (6765 items) in 72ms
2025-10-27 15:42:14.746 +05:30 [INF] Using parallel processing for 27044 combinations
2025-10-27 15:42:14.959 +05:30 [INF] Built stock list (9397 items) in 229ms
2025-10-27 15:42:14.962 +05:30 [INF] Successfully built 9397 stock items in 603ms
2025-10-27 15:42:14.989 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.StockItem, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 15:42:15.350 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API) in 26989.7462ms
2025-10-27 15:42:15.363 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API)'
2025-10-27 15:42:18.190 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:42:18.208 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:42:18.219 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:42:18.226 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:42:18.575 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetStockDetails - 200 null application/json; charset=utf-8 31241.5653ms
2025-10-27 15:42:18.750 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'IServiceProvider'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ThrowHelper.ThrowObjectDisposedException()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 160
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
2025-10-27 15:43:17.125 +05:30 [INF] User profile is available. Using 'C:\Users\Dinuk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-27 15:43:17.740 +05:30 [INF] Now listening on: https://localhost:7168
2025-10-27 15:43:17.750 +05:30 [INF] Now listening on: http://localhost:5076
2025-10-27 15:43:18.081 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-10-27 15:43:18.084 +05:30 [INF] Hosting environment: Test
2025-10-27 15:43:18.086 +05:30 [INF] Content root path: C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth
2025-10-27 15:43:18.816 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/index.html - null null
2025-10-27 15:43:19.288 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/index.html - 200 null text/html;charset=utf-8 489.2193ms
2025-10-27 15:43:19.590 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_vs/browserLink - null null
2025-10-27 15:43:19.591 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - null null
2025-10-27 15:43:19.638 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_framework/aspnetcore-browser-refresh.js - 200 16509 application/javascript; charset=utf-8 48.627ms
2025-10-27 15:43:19.702 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/_vs/browserLink - 200 null text/javascript; charset=UTF-8 113.7844ms
2025-10-27 15:43:22.178 +05:30 [INF] Request starting HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - null null
2025-10-27 15:43:22.404 +05:30 [INF] Request finished HTTP/2 GET https://localhost:7168/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 225.7532ms
2025-10-27 15:43:24.387 +05:30 [INF] Request starting HTTP/1.1 GET https://localhost:7168/api/Business/GetStockDetails - text/plain 87
2025-10-27 15:43:24.868 +05:30 [INF] Executing endpoint 'SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API)'
2025-10-27 15:43:25.297 +05:30 [INF] Route matched with {action = "GetStockDetails", controller = "Business"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStockDetails() on controller SriKanth.API.Controllers.BusinessController (SriKanth.API).
2025-10-27 15:43:25.474 +05:30 [INF] Beginning to retrieve sales stock details
2025-10-27 15:43:25.508 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.519 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.540 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.544 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.555 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.562 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.571 +05:30 [INF] Start processing HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:25.577 +05:30 [INF] Sending HTTP request POST https://login.microsoftonline.com/6dfae1d4-52b9-4fc7-9b7c-1014447db47b/oauth2/v2.0/token
2025-10-27 15:43:26.037 +05:30 [INF] Received HTTP response headers after 510.1143ms - 200
2025-10-27 15:43:26.044 +05:30 [INF] End processing HTTP request after 548.4302ms - 200
2025-10-27 15:43:26.066 +05:30 [INF] Received HTTP response headers after 518.5004ms - 200
2025-10-27 15:43:26.067 +05:30 [INF] Received HTTP response headers after 503.2026ms - 200
2025-10-27 15:43:26.082 +05:30 [INF] End processing HTTP request after 541.4749ms - 200
2025-10-27 15:43:26.083 +05:30 [INF] Received HTTP response headers after 503.6217ms - 200
2025-10-27 15:43:26.084 +05:30 [INF] End processing HTTP request after 529.2028ms - 200
2025-10-27 15:43:26.094 +05:30 [INF] End processing HTTP request after 522.841ms - 200
2025-10-27 15:43:26.097 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:43:26.097 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:43:26.098 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:43:26.101 +05:30 [INF] Start processing HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:43:26.103 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/inventoryBalances
2025-10-27 15:43:26.105 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/items?$expand=itemsubstitutions
2025-10-27 15:43:26.115 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/salesPrices
2025-10-27 15:43:26.118 +05:30 [INF] Sending HTTP request GET https://api.businesscentral.dynamics.com/v2.0/Production/api/asttrum/sales/v1.0/companies(b452a9e8-ba54-f011-be59-6045bd204fef)/locations
2025-10-27 15:43:27.032 +05:30 [INF] Received HTTP response headers after 898.3943ms - 200
2025-10-27 15:43:27.069 +05:30 [INF] End processing HTTP request after 967.846ms - 200
2025-10-27 15:43:27.756 +05:30 [INF] Received HTTP response headers after 1627.7988ms - 200
2025-10-27 15:43:27.761 +05:30 [INF] End processing HTTP request after 1662.4131ms - 200
2025-10-27 15:43:27.846 +05:30 [INF] Received HTTP response headers after 1725.5447ms - 200
2025-10-27 15:43:27.849 +05:30 [INF] End processing HTTP request after 1752.1556ms - 200
2025-10-27 15:43:41.478 +05:30 [INF] Received HTTP response headers after 15356.5215ms - 200
2025-10-27 15:43:41.483 +05:30 [INF] End processing HTTP request after 15385.376ms - 200
2025-10-27 15:44:06.567 +05:30 [INF] Successfully retrieved 9397 stock items
2025-10-27 15:44:06.592 +05:30 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[SriKanth.Model.BusinessModule.DTOs.StockItem, SriKanth.Model, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-10-27 15:44:06.832 +05:30 [INF] Executed action SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API) in 41520.2575ms
2025-10-27 15:44:06.837 +05:30 [INF] Executed endpoint 'SriKanth.API.Controllers.BusinessController.GetStockDetails (SriKanth.API)'
2025-10-27 15:44:08.339 +05:30 [WRN] No store type was specified for the decimal property 'TotalAmount' on entity type 'Order'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:44:08.343 +05:30 [WRN] No store type was specified for the decimal property 'DiscountPercent' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:44:08.346 +05:30 [WRN] No store type was specified for the decimal property 'Quantity' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:44:08.348 +05:30 [WRN] No store type was specified for the decimal property 'UnitPrice' on entity type 'OrderItem'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-10-27 15:44:08.587 +05:30 [INF] Request finished HTTP/1.1 GET https://localhost:7168/api/Business/GetStockDetails - 200 null application/json; charset=utf-8 44198.3444ms
2025-10-27 15:44:08.686 +05:30 [ERR] Error occurred while logging user history in background task
System.ObjectDisposedException: Cannot access a disposed object.
Object name: 'IServiceProvider'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ThrowHelper.ThrowObjectDisposedException()
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at SriKanth.Data.LoginData.AddUserHistoryAsync(UserHistory userHistory) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Data\LoginData.cs:line 160
   at SriKanth.Service.UserHistoryService.LogUserActionAsync(Int32 userId, String actionType, String entityType, String endpoint, String ipAddress) in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth.Service\UserHistoryService.cs:line 33
   at HRIS.API.Infrastructure.Helpers.UserHistoryActionFilter.<>c__DisplayClass4_0.<<OnActionExecutionAsync>b__0>d.MoveNext() in C:\Users\Dinuk\Documents\GitHub\SriKanth\SriKanth\Infrastructure\UserHistoryActionFilter.cs:line 44
